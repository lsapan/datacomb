module.exports = "{{#partial discreteColumnOptions}}\n  {{#discreteColumns}}\n    <option value={{ndx}}>{{label}}</option>\n  {{/discreteColumns}}\n{{/partial}}\n{{#partial continuousColumnOptions}}\n  {{#continuousColumns}}\n    <option value={{ndx}}>{{label}}</option>\n  {{/continuousColumns}}\n{{/partial}}\n\n{{! Header controls }}\n<div class='tc-header-controls'>\n  <div class='control-set push-down'>\n    <ul>\n      <li>\n        <label>\n          <input type='checkbox' checked='{{focusOnHover}}'>Focus On Hover\n        </label>\n      </li>\n      <li>\n        <label>\n          <input type='checkbox' checked='{{hideUnfocused}}'>Hide Unfocused\n        </label>\n      </li>\n    </ul>\n  </div>\n\n  <div class='control-set'>\n    <button on-click='set(\"rows.*.focused\", true)'>Focus All</button> {{! TODO: check for disable state conditions... }}\n    <button on-click='set(\"rows.*.focused\", false)'>Unfocus All</button>\n  </div>\n\n  <div class='control-set'>\n    <button on-click='toggle(\"showFilter\")'>{{showFilter ? 'Close' : 'Filter'}}</button>\n  </div>\n\n  <div class='control-set'>\n    <button on-click='toggle(\"showSummary\")'>{{showSummary ? 'Close' : 'Summary Stats'}}</button>\n    <button on-click='toggle(\"showHistogram\")'>{{showHistogram ? 'Close' : 'Histograms'}}</button>\n  </div>\n\n  <div class='control-set push-down'>\n    Group <select value='{{groupByNdx}}'>\n      <option value='-1'>None</option>\n      {{>discreteColumnOptions}}\n    </select>\n  </div>\n\n  <div class='control-set push-down'>\n    Color <select value='{{globalColorNdx}}'>\n      <option value='-1'>None</option>\n      {{>discreteColumnOptions}}\n    </select>\n  </div>\n\n  <!--\n  <div class='control-set'>\n    <button>Compare</button>\n    <select>\n      {{>continuousColumnOptions}}\n    </select>\n    vs.\n    <select>\n      {{>continuousColumnOptions}}\n    </select>\n  </div>\n  -->\n</div>\n\n\n{{! TODO: move this to another .hbs }}\n{{#partial row}}\n  {{#if !hideUnfocused || focused}}\n  <tr\n    {{#if focused}}focused{{/if}}\n    {{#if hovered && focusOnHover}}hovered{{/if}}\n    on-mousedown='dragStart:{{rowNdx}}'\n    on-mousemove='dragOver'\n    on-mouseup='dragEnd:{{rowNdx}}'\n    on-click='focusRow:{{rowNdx}}'\n    on-mouseenter='hoverRow:{{rowNdx}}'>\n\n    <td class='label'>\n      {{#if (hovered && focusOnHover) || focused}}{{label}}{{/if}}\n    </td>\n\n    {{#columns:colNdx}}\n      <td>\n        {{#if type == 'discrete'}}\n          {{#if (hovered && focusOnHover) || focused}}{{values[colNdx]}}{{/if}}\n          <div style='background:{{colorMap[values[colNdx]]}};' class='bar full'></div>\n        {{else}}\n          {{#if (hovered && focusOnHover) || focused}}{{labels[colNdx]}}{{/if}}\n          <div style='width:{{widths[colNdx]}}%;{{#if globalColorNdx != -1}}background:{{columns[globalColorNdx].colorMap[values[globalColorNdx]]}};{{/if}}' class='bar'></div>\n        {{/if}}\n      </td>\n    {{/cols}}\n\n  </tr>\n  {{/if}}\n{{/partial}}\n\n<div class='data-comb-container'>\n<table\n  {{#if showSummary}}hasSummary{{/if}}\n  {{#if showHistogram}}hasHistogram{{/if}}\n  {{#if showFilter}}hasFilter{{/if}}\n  class='data-comb'\n  cellpadding='0'\n  cellspacing='0'>\n\n  {{! Loop through columns for headers... }}\n  <thead>\n    <tr>\n      <th style='width:{{labelWidth}};'><div>Label</div></th>\n      {{#columns:colNdx}}\n        <th style='width:{{width}};'\n          {{#if detailColNdx == colNdx}}detail{{/if}} >\n          <div>\n            {{label}}\n            <button on-click='colSort:{{colNdx}},{{\"desc\"}}' >&#9650;</button>\n            <button on-click='colSort:{{colNdx}},{{\"asc\"}}'>&#9660;</button>\n\n            {{#if type !== 'discrete' }}\n              {{#if detailColNdx === ndx}}\n                <button on-click='set(\"detailColNdx\", -1)'>X</button>\n              {{else}}\n                <button on-click='set(\"detailColNdx\", ndx)'>â¤¢</button>\n              {{/if}}\n            {{/if}}\n          </div>\n       </th>\n      {{/columns}}\n    </tr>\n    {{#if showSummary}}\n      <tr class='summary expanded'>\n        <th></th>\n        {{#columns:colNdx}}\n          <th>\n            <div>\n            {{#if type !== 'discrete' }}\n              MEAN: <b>{{mean.toFixed(2)}}</b><br />\n              MEDIAN: <b>{{median.toFixed(2)}}</b><br />\n              MAX: <b>{{maxValue.toFixed(2)}}</b><br />\n              MIN: <b>{{minValue.toFixed(2)}}</b>\n            {{/if}}\n            </div>\n          </th>\n        {{/columns}}\n      </tr>\n    {{/if}}\n\n    {{#if showHistogram}}\n      <tr class='histogram expanded'>\n        <th></th>\n        {{#columns:colNdx}}\n          <th>\n            <div>\n            {{#if type !== 'discrete' }}\n              <HistogramChart bars='{{histogram}}' width='{{pxWidth}}' />\n            {{/if}}\n            </div>\n          </th>\n        {{/columns}}\n      </tr>\n    {{/if}}\n\n  </thead>\n\n\n  {{! Loop through rows(cleaned up data) }}\n  <tbody>\n    <tr><td colspan='{{columns.length+1}}'></td></tr>\n\n    {{#if detailColNdx != -1}}\n      <tr class='col-details'>\n        <th></th>\n        {{#columns:colNdx}}\n          <td>\n            {{#if colNdx == detailColNdx}}\n              <div class='self-label-container'>\n                <div class='right label'>{{label}}</div>\n                <div class='left label'>{{label}}</div>\n              </div>\n            {{elseif type === 'discrete' }}\n              <div class='discrete-vals'>\n                {{#each detailAverages[colNdx]:label}}\n                  {{label}}: <b>{{(.).toFixed(2)}}</b><br />\n                  <div class='bar' style='width:{{detailCol.widthFn(.)}}%;background:{{colorMap[label]}};'></div>\n                {{/each}}\n              </div>\n            {{else}}\n              <div>\n                CORR: <b>{{correlationForCols(detailColNdx, colNdx).toFixed(4)}}</b><br />\n                <ScatterPlot\n                  points={{rows}}\n                  height='{{detailCol.pxWidth}}'\n                  width='{{pxWidth}}'\n                  xAccessor={{valAccessor}}\n                  yAccessor={{detailCol.valAccessor}}>\n                    {{#partial point}}\n                      <circle r={{hovered ? 2.5 : 1.5}}\n                        on-mouseover='hoverRow:{{ndx}}'\n                        on-click='focusRow:{{ndx}}'\n                        {{#if focused}}focused{{/if}}\n                        {{#if hovered}}hovered{{/if}}\n                        {{#if filtered}}filtered{{/if}}\n                        cx={{xScale(xAccessor(this))}}\n                        cy={{yScale(yAccessor(this))}} />\n                    {{/partial}}\n                </ScatterPlot>\n              </div>\n            {{/if}}\n          </td>\n        {{/columns}}\n      </tr>\n    {{/if}}\n\n    {{#if showFilter}}\n      <tr class='filter expanded'>\n        <td></td>\n        {{#columns:colNdx}}\n          <td>\n            <div>\n            {{#if type === 'discrete' }}\n              <button on-click='set(\"filters.\"+colNdx+\".*\", true)'>All</button>\n              <button on-click='set(\"filters.\"+colNdx+\".*\", false)'>Clear</button>\n              {{#uniqValues}}\n                <label><input type='checkbox' checked={{filters[colNdx][.]}} />{{.}}</label><br />\n              {{/uniqValues}}\n            {{else}}\n              Min: <input type='text' value='{{filters[colNdx].min}}'/><br />\n              Max: <input type='text' value='{{filters[colNdx].max}}'/><br />\n              <RangeSlider\n                width={{pxWidth}}\n                upperBound={{maxValue}}\n                lowerBound={{minValue}}\n                lower={{filters[colNdx].min}}\n                upper={{filters[colNdx].max}}\n                step={{ (maxValue-minValue) / 100}} />\n            {{/if}}\n            </div>\n          </td>\n        {{/columns}}\n      </tr>\n    {{/if}}\n\n\n    {{#rows:rowNdx}}\n      {{#if !filtered}}\n        {{>row}}\n      {{/if}}\n    {{/rows}}\n  </tbody>\n\n</table>\n</div>\n";